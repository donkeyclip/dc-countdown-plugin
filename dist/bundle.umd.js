!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("@donkeyclip/motorcortex")):"function"==typeof define&&define.amd?define(["@donkeyclip/motorcortex"],e):(t="undefined"!=typeof globalThis?globalThis:t||self)["@donkeyclip/dc-countdown-plugin"]=e(t.MotorCortex)}(this,(function(t){"use strict";class e extends t.Effect{getScratchValue(){return 0}onGetContext(){const t=Date.now();let e=this.targetValue-t;if(e<0&&(e=this.targetValue),e=Math.floor(e/1e3),"seconds"===this.attrs.type)this.down=t=>{const o=Math.floor(t/1e3);let n=(e-o)%60;return n<0&&(n=0),this.attrs.forceDoubleDigit&&(n=n.toString().padStart(2,"0")),n};else if("minutes"===this.attrs.type)this.down=t=>{const o=Math.floor(t/1e3),n=(e-o)%3600;let r=Math.floor(n/60);return r<0&&(r=0),this.attrs.forceDoubleDigit&&(r=r.toString().padStart(2,"0")),r};else if("hours"===this.attrs.type)this.down=t=>{const o=Math.floor(t/1e3),n=(e-o)%86400;let r=Math.floor(n/3600);return r<0&&(r=0),this.attrs.forceDoubleDigit&&(r=r.toString().padStart(2,"0")),r};else{if("days"!==this.attrs.type)throw new Error("Invalid type for countdown effect");this.down=t=>{const o=Math.floor(t/1e3),n=e-o;let r=Math.floor(n/86400);return r<0&&(r=0),this.attrs.forceDoubleDigit&&(r=r.toString().padStart(2,"0")),r}}if("free"===this.attrs.operation){const t=e=>{const o=this.down(e);this.element.innerHTML=o,requestAnimationFrame(t)};requestAnimationFrame(t)}}onProgress(t){if("free"===this.attrs.operation)return;let e=this.down(t);this.element.innerHTML=e}}return{npm_name:"@donkeyclip/dc-countdown-plugin",version:"0.0.1",incidents:[{exportable:e,name:"Countdown",attributesValidationRules:{forceDoubleDigit:{type:"boolean",default:!1},operation:{type:"string",enum:["free","fixed"],default:"fixed"},type:{type:"string",enum:["seconds","minutes","hours","days"],default:"seconds"},animatedAttrs:{type:"object",props:{time:{type:"number",positive:!0,integer:!0}}}}}]}}));
