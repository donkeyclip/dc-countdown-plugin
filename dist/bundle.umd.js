!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("@donkeyclip/motorcortex")):"function"==typeof define&&define.amd?define(["@donkeyclip/motorcortex"],e):(t="undefined"!=typeof globalThis?globalThis:t||self)["@donkeyclip/dc-countdown-plugin"]=e(t.MotorCortex)}(this,(function(t){"use strict";const e=(t,e)=>{if("seconds"===t)return"seconds"===e?1:"minutes"===e?60:"hours"===e?3600:"days"===e?86400:60;if("minutes"===t){const t=60;return"hours"===e?60*t:"days"===e?1440*t:"minutes"===e?t:60*t}if("hours"===t){const t=3600;return"days"===e?24*t:"hours"===e?t:24*t}return"days"===t?86400:void 0};class o extends t.Effect{getScratchValue(){return 0}onGetContext(){const t=Date.now();let o=this.targetValue-t;if(o<0&&(o=this.targetValue),o=Math.floor(o/1e3),"seconds"===this.attrs.type)this.down=t=>{const s=Math.floor(t/1e3);let n=(o-s)%e(this.attrs.type,this.attrs.context);return n<0&&(n=0),this.attrs.forceDoubleDigit&&(n=n.toString().padStart(2,"0")),n};else if("minutes"===this.attrs.type)this.down=t=>{const s=Math.floor(t/1e3),n=(o-s)%e(this.attrs.type,this.attrs.context);let r=Math.floor(n/60);return r<0&&(r=0),this.attrs.forceDoubleDigit&&(r=r.toString().padStart(2,"0")),r};else if("hours"===this.attrs.type)this.down=t=>{const s=Math.floor(t/1e3),n=(o-s)%e(this.attrs.type,this.attrs.context);let r=Math.floor(n/3600);return r<0&&(r=0),this.attrs.forceDoubleDigit&&(r=r.toString().padStart(2,"0")),r};else{if("days"!==this.attrs.type)throw new Error("Invalid type for countdown effect");this.down=t=>{const e=Math.floor(t/1e3),s=o-e;let n=Math.floor(s/86400);return n<0&&(n=0),this.attrs.forceDoubleDigit&&(n=n.toString().padStart(2,"0")),n}}if("free"===this.attrs.operation){const t=e=>{const o=this.down(e);this.element.innerHTML=o,requestAnimationFrame(t)};requestAnimationFrame(t)}}onProgress(t){if("free"===this.attrs.operation)return;let e=this.down(t);this.element.innerHTML=e}}var s={incidents:[{exportable:o,name:"Countdown",attributesValidationRules:{forceDoubleDigit:{type:"boolean",default:!1},operation:{type:"string",enum:["free","fixed"],default:"fixed"},type:{type:"string",enum:["seconds","minutes","hours","days"],default:"seconds"},animatedAttrs:{type:"object",props:{time:{type:"number",positive:!0,integer:!0}}}}}]};t.loadPlugin(s);class n extends t.Effect{onGetContext(){const t={hours:"#hours",minutes:"#minutes",seconds:"#seconds",days:"#days"};Object.keys(t).forEach((e=>{this.attrs[e]&&this.attrs[e].selector&&(t[e]=this.attrs[e].selector)})),Object.keys(t).forEach((e=>{this.element.querySelector(t[e])}))}}return{npm_name:"@donkeyclip/dc-countdown-plugin",version:"0.0.3",incidents:[{exportable:n,name:"GayCD",attributesValidationRules:{hours:{type:"object",optional:!0,props:{selector:{type:"string"}}},minutes:{type:"object",optional:!0,props:{selector:{type:"string"}}},seconds:{type:"object",optional:!0,props:{selector:{type:"string"}}},days:{type:"object",optional:!0,props:{selector:{type:"string"}}}}},{exportable:o,name:"Countdown",attributesValidationRules:{forceDoubleDigit:{type:"boolean",default:!1},operation:{type:"string",enum:["free","fixed"],default:"fixed"},type:{type:"string",enum:["seconds","minutes","hours","days"],default:"seconds"},animatedAttrs:{type:"object",props:{time:{type:"number",positive:!0,integer:!0}}}}}]}}));
